(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),r=t(18),a=t.n(r),i=(t(9),t(19)),u=t(6),s=t(3),d=t(0),b=function(e){var n=e.onChange,t=e.filter;return Object(d.jsxs)("div",{children:["filter with Name: ",Object(d.jsx)("input",{onChange:n,value:t})]})},l=function(e){var n=e.onSubmit,t=e.onNameChange,c=e.onNumberChange,o=e.newName,r=e.number;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:n,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:t,value:o}),"number: ",Object(d.jsx)("input",{onChange:c,value:r})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var n=e.filteredName,t=e.onDelete;return Object(d.jsx)("div",{children:n.map((function(e){return Object(d.jsxs)("p",{children:[e.name," ",e.number,Object(d.jsx)("button",{onClick:function(){return t(e)},children:"Delete"})]},e.id)}))})},j=t(5),h=t.n(j),m="http://localhost:3001/api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},p=function(e){return h.a.post(m,e).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e){return h.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.type;return null===n?null:Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:t,children:n})})},g=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),a=Object(s.a)(r,2),j=a[0],h=a[1],m=Object(c.useState)(""),g=Object(s.a)(m,2),C=g[0],N=g[1],S=Object(c.useState)(""),L=Object(s.a)(S,2),k=L[0],y=L[1],D=Object(c.useState)(null),F=Object(s.a)(D,2),T=F[0],E=F[1],P=Object(c.useState)(null),A=Object(s.a)(P,2),B=A[0],I=A[1];Object(c.useEffect)((function(){O().then((function(e){return o(e)}))}),[]);var J=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(x,{message:T,type:B}),Object(d.jsx)(b,{onChange:function(e){y(e.target.value)},filter:k}),Object(d.jsx)("h3",{children:"Add a New"}),Object(d.jsx)(l,{onSubmit:function(e){if(e.preventDefault(),""===j||""===C)return window.alert("Either of the field cannot be empty");var n=t.find((function(e){return e.name.toLowerCase()===j.toLowerCase()||e.number===C}));if(n){if(n.number===C&&n.name.toLowerCase()===j.toLowerCase())return window.alert("".concat(j," : ").concat(C," is already added to phonebook"));if(n.name.toLowerCase()===j.toLowerCase()){if(window.confirm("".concat(j," is already added to phonebook, replace old number with new one ? "))){var c=Object(u.a)(Object(u.a)({},n),{},{number:C});v(c).then((function(e){o(t.map((function(n){return n.id!==c.id?n:e})))})).then((function(){h(""),N(""),E("Updated old number for ".concat(j," with ").concat(C)),I("success"),setTimeout((function(){E(null)}),2e3)}))}return}if(n.number===C){if(window.confirm("".concat(C," is already added to phonebook, replace old number with new one ? "))){var r=Object(u.a)(Object(u.a)({},n),{},{name:j});v(r).then((function(e){o(t.map((function(n){return n.id!==r.id?n:e})))})).then((function(){h(""),N(""),E("Updated contact name for ".concat(C," with ").concat(j)),I("success"),setTimeout((function(){E(null)}),2e3)}))}return}}else{p({name:j,number:C}).then((function(e){o([].concat(Object(i.a)(t),[e])),h(""),N(""),E("Added contact ".concat(j)),I("success"),setTimeout((function(){E(null)}),2e3)}))}},onNameChange:function(e){h(e.target.value)},onNumberChange:function(e){N(e.target.value)},newName:j,number:C}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(f,{filteredName:J,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&w(e.id).then((function(n){o(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){E(" ".concat(e.name," already removed from server")),I("error"),o(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){E(null)}),2e3)}))}}),"..."]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,44)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root")),C()},9:function(e,n,t){}},[[43,1,2]]]);
//# sourceMappingURL=main.5de2ce1e.chunk.js.map