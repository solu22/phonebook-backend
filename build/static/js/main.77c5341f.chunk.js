(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),r=t(16),a=t.n(r),i=(t(7),t(5)),u=t(3),s=t(0),d=function(e){var n=e.onChange,t=e.filter;return Object(s.jsxs)("div",{children:["filter with Name: ",Object(s.jsx)("input",{onChange:n,value:t})]})},b=function(e){var n=e.onSubmit,t=e.onNameChange,c=e.onNumberChange,o=e.newName,r=e.number;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:t,value:o}),"number: ",Object(s.jsx)("input",{onChange:c,value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var n=e.filteredName,t=e.onDelete;return 0===n.length?Object(s.jsx)("p",{children:"Person not found"}):Object(s.jsx)("div",{children:n.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){return t(e)},children:"Delete"})]},e.id)}))})},l=t(4),j=t.n(l),h="/api/persons",m=function(){return j.a.get(h).then((function(e){return e.data}))},O=function(e){return j.a.post(h,e).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},w=function(e){return j.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.type;return null===n?null:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:t,children:n})})},x=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),l=a[0],j=a[1],h=Object(c.useState)(""),x=Object(u.a)(h,2),g=x[0],C=x[1],N=Object(c.useState)(""),S=Object(u.a)(N,2),L=S[0],k=S[1],y=Object(c.useState)(null),D=Object(u.a)(y,2),F=D[0],T=D[1],P=Object(c.useState)(null),E=Object(u.a)(P,2),A=E[0],B=E[1];Object(c.useEffect)((function(){m().then((function(e){return o(e)}))}),[]);var I=t.filter((function(e){return e.name.toLowerCase().includes(L.toLowerCase())}));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(v,{message:F,type:A}),Object(s.jsx)(d,{onChange:function(e){k(e.target.value)},filter:L}),Object(s.jsx)("h3",{children:"Add a New"}),Object(s.jsx)(b,{onSubmit:function(e){if(e.preventDefault(),""===l||""===g)return window.alert("Either of the field cannot be empty");var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()||e.number===g}));if(n){if(n.number===g&&n.name.toLowerCase()===l.toLowerCase())return window.alert("".concat(l," : ").concat(g," is already added to phonebook"));if(n.name.toLowerCase()===l.toLowerCase()){if(window.confirm("".concat(l," is already added to phonebook, replace old number with new one ? "))){var c=Object(i.a)(Object(i.a)({},n),{},{number:g});w(c).then((function(e){o(t.map((function(n){return n.id!==c.id?n:e})))})).then((function(){j(""),C(""),T("Updated old number for ".concat(l," with ").concat(g)),B("success"),setTimeout((function(){T(null)}),2e3)}))}return}if(n.number===g){if(window.confirm("".concat(g," is already added to phonebook, replace old number with new one ? "))){var r=Object(i.a)(Object(i.a)({},n),{},{name:l});w(r).then((function(e){o(t.map((function(n){return n.id!==r.id?n:e})))})).then((function(){j(""),C(""),T("Updated contact name for ".concat(g," with ").concat(l)),B("success"),setTimeout((function(){T(null)}),2e3)}))}return}}else{var a={name:l,number:g};O(a).then((function(e){o(t.concat(a)),j(""),C(""),T("Added contact ".concat(l)),B("success"),setTimeout((function(){T(null)}),2e3)}))}},onNameChange:function(e){j(e.target.value)},onNumberChange:function(e){C(e.target.value)},newName:l,number:g}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(f,{filteredName:I,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(n){o(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){T(" ".concat(e.name," already removed from server")),B("error"),o(t.filter((function(n){return n.id!==e.id}))),setTimeout((function(){T(null)}),2e3)}))}}),"..."]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root")),g()},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.77c5341f.chunk.js.map